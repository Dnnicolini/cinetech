<IfModule mod_rewrite.c>
    RewriteEngine On

    # Define o diretório base do projeto (se necessário, ajuste o caminho)
    RewriteBase /

    # Redireciona todas as requisições para index.php, exceto arquivos e diretórios existentes
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ public/index.php?url=$1 [QSA,L]

    # Permite uploads de arquivos de imagem (JPEG, PNG, GIF)
    <FilesMatch "\.(jpg|jpeg|png|gif)$">
        Header set Cache-Control "max-age=31536000, public"
    </FilesMatch>

    # Segurança: Bloqueia acesso direto ao diretório app e config
    RewriteRule ^(app|config) - [F,L]

    # Impede listagem de diretórios
    Options -Indexes
</IfModule>
